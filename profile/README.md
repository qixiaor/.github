
---

# å›¢é˜Ÿå¼€å‘è§„èŒƒV3.0

> æœ¬æ–‡æ¡£ç”¨äºç»Ÿä¸€å›¢é˜Ÿåœ¨ Java æœåŠ¡ç«¯å¼€å‘ä¸­çš„ç¼–ç è§„èŒƒã€åˆ†å±‚è§„èŒƒã€Git å·¥ä½œæµè§„èŒƒä»¥åŠæ•°æ®åº“è§„èŒƒï¼Œç¡®ä¿åä½œæµç•…ã€ä»£ç é«˜è´¨é‡ã€é¡¹ç›®å¯æŒç»­ç»´æŠ¤ã€‚

---

# ç›®å½•ï¼ˆTOCï¼‰

* [é˜…è¯»é¡»çŸ¥](#é˜…è¯»é¡»çŸ¥)
* [ä¸€ã€Java é¡¹ç›®è§„èŒƒ](#ä¸€java-é¡¹ç›®è§„èŒƒ)

  * [1.1 é¡¹ç›®å‘½åè§„èŒƒ](#11-é¡¹ç›®å‘½åè§„èŒƒ)
  * [1.2 æ–¹æ³•å‚æ•°è§„èŒƒ](#12-æ–¹æ³•å‚æ•°è§„èŒƒ)
  * [1.3 ä»£ç ç›®å½•ç»“æ„](#13-ä»£ç ç›®å½•ç»“æ„)
  * [1.4 common ç›®å½•è§„èŒƒ](#14-common-ç›®å½•è§„èŒƒ)
  * [1.5 module ç›®å½•è§„èŒƒ](#15-module-ç›®å½•è§„èŒƒ)
* [äºŒã€MVC å±‚è§„èŒƒ](#äºŒmvc-å±‚è§„èŒƒ)

  * [2.1 åˆ†å±‚ç»“æ„](#21-åˆ†å±‚ç»“æ„)
  * [2.2 Controller è§„èŒƒ](#22-controller-è§„èŒƒ)
  * [2.3 Service è§„èŒƒ](#23-service-è§„èŒƒ)
  * [2.4 Manager å±‚è§„èŒƒ](#24-manager-å±‚è§„èŒƒ)
  * [2.5 DAO å±‚è§„èŒƒ](#25-dao-å±‚è§„èŒƒ)
  * [2.6 JavaBean å‘½åè§„èŒƒ](#26-javabean-å‘½åè§„èŒƒ)
  * [2.7 Boolean å‘½åè§„èŒƒ](#27-boolean-å‘½åè§„èŒƒ)
* [ä¸‰ã€æ•°æ®åº“è§„èŒƒ](#ä¸‰æ•°æ®åº“è§„èŒƒ)

  * [3.1 æ•°æ®åº“å‘½å](#31-æ•°æ®åº“å‘½å)
  * [3.2 è¡¨å‘½å](#32-è¡¨å‘½å)
  * [3.3 å»ºè¡¨è§„èŒƒ](#33-å»ºè¡¨è§„èŒƒ)
  * [3.4 ç´¢å¼•è§„èŒƒ](#34-ç´¢å¼•è§„èŒƒ)
* [å››ã€Git å·¥ä½œæµè§„èŒƒ](#å››git-å·¥ä½œæµè§„èŒƒ)

  * [4.1 Git æäº¤ä¿¡æ¯è§„èŒƒ](#41-git-æäº¤ä¿¡æ¯è§„èŒƒ)
  * [4.2 Git åˆ†æ”¯å‘½åè§„èŒƒ](#42-git-åˆ†æ”¯å‘½åè§„èŒƒ)
  * [4.3 Git åŒæ­¥ä»£ç è§„èŒƒ](#43-git-åŒæ­¥ä»£ç è§„èŒƒ)
* [äº”ã€DTOã€VOã€Entity è§„èŒƒ](#äº”dtovoeentity-è§„èŒƒ)
* [å…­ã€å¤§æ¨¡å—ä¸‹é¡¹ç›®ç®¡ç†åŠæ³•](#å…­å¤§æ¨¡å—ä¸‹é¡¹ç›®ç®¡ç†åŠæ³•)

---

# é˜…è¯»é¡»çŸ¥

é˜…è¯»æœ¬ç¯‡æ–‡æ¡£å‰ï¼Œè¯·åŠ¡å¿…å…ˆé˜…è¯»ï¼š

ğŸ‘‰ã€Šé«˜è´¨é‡ä»£ç æ€æƒ³ V3.0ã€‹

---

# ä¸€ã€Java é¡¹ç›®è§„èŒƒ

## 1.1 é¡¹ç›®å‘½åè§„èŒƒ

å…¨éƒ¨é‡‡ç”¨ï¼š

* å°å†™å­—æ¯
* ä¸­åˆ’çº¿è¿æ¥

**ç¤ºä¾‹ï¼ˆæ¨èï¼‰ï¼š**

```
mall-management-system
order-service-client
user-api
```

---

## 1.2 æ–¹æ³•å‚æ•°è§„èŒƒ

æ¯ä¸ªæ–¹æ³• **æœ€å¤š 5 ä¸ªå‚æ•°**ã€‚è¶…è¿‡ 5 ä¸ªå¿…é¡»å°è£…ä¸º DTO æˆ– Modelã€‚

ç†ç”±ï¼š

* é¿å…è°ƒç”¨è€…å‡ºé”™
* é¿å…å¤šä¸ªç›¸åŒç±»å‹å‚æ•°ä¾èµ–é¡ºåº
* controller/service å¯è¯»æ€§æå‡

---

## 1.3 ä»£ç ç›®å½•ç»“æ„

```
src                               æºç ç›®å½•
|-- common                        é€šç”¨ç±»åº“
|-- config                        é…ç½®ä¿¡æ¯
|-- constant                      å…¨å±€å…¬å…±å¸¸é‡
|-- handler                       å…¨å±€å¤„ç†å™¨
|-- interceptor                   å…¨å±€æ‹¦æˆªå™¨
|-- listener                      å…¨å±€ç›‘å¬å™¨
|-- module                        ä¸šåŠ¡æ¨¡å—ï¼ˆæ–¹ä¾¿æ‹†åˆ†å¾®æœåŠ¡ï¼‰
|   |-- employee                  å‘˜å·¥æ¨¡å—
|   |-- role                      è§’è‰²æ¨¡å—
|   |-- login                     ç™»å½•æ¨¡å—
|-- third                         å¤–éƒ¨æœåŠ¡ï¼ˆredis/oss/å¾®ä¿¡ SDK ç­‰ï¼‰
|-- util                          å…¨å±€å·¥å…·ç±»
|-- Application.java              å¯åŠ¨ç±»
```

---

## 1.4 common ç›®å½•è§„èŒƒ

```
src
|-- common
|   |-- anno        é€šç”¨æ³¨è§£ï¼ˆæƒé™ã€ç™»å½•ç­‰ï¼‰
|   |-- constant    é€šç”¨å¸¸é‡ï¼ˆå¦‚ ResponseCodeConstï¼‰
|   |-- domain      å…¨å±€ JavaBeanï¼ˆBaseEntityã€PageParamDTOï¼‰
|   |-- exception   å…¨å±€å¼‚å¸¸ç±»ï¼ˆBusinessExceptionï¼‰
|   |-- json        Json å¤„ç†ç±»
|   |-- swagger     Swagger æ–‡æ¡£é…ç½®
|   |-- validator   é€šç”¨æ ¡éªŒå™¨ï¼ˆCheckEnumã€CheckBigDecimalï¼‰
```

---

## 1.5 module ç›®å½•è§„èŒƒ

```
src
|-- module
|   |-- role
|       |-- RoleController.java
|       |-- RoleConst.java
|       |-- RoleService.java
|       |-- RoleDao.java
|       |-- domain
|           |-- RoleEntity.java
|           |-- RoleForm.java
|           |-- RoleVO.java
|   |-- employee
|   |-- login
|   |-- email
```

---

# äºŒã€MVC å±‚è§„èŒƒ

## 2.1 åˆ†å±‚ç»“æ„

* Controller
* Service
* Manager
* DAO

---

## 2.2 Controller è§„èŒƒ

### â‘  RequestMapping åªèƒ½å†™åœ¨æ–¹æ³•ä¸Š

é¿å… URL éšè—åœ¨ class æ³¨è§£é‡Œã€‚

### â‘¡ ç¦æ­¢ RESTful å¼ºè¯­ä¹‰ URL

æ¨èï¼š`/æ¨¡å—/å­æ¨¡å—/åŠ¨ä½œ`

ç¤ºä¾‹ï¼š

```
POST /department/add
POST /department/update
GET  /department/delete/{id}
```

### â‘¢ Swagger å¿…é¡»å¸¦ä½œè€…è¯´æ˜

```
@ApiOperation("æ›´æ–°éƒ¨é—¨ @author å“å¤§")
```

### â‘£ Controller å¿…é¡»ä¿æŒç®€æ´

* ä¸å†™ä¸šåŠ¡é€»è¾‘
* ä¸åšå¤æ‚æ ¡éªŒï¼ˆä»…é™ @Validï¼‰
* ä¸ç»„è£… VO

### â‘¤ åªèƒ½åœ¨ Controller è·å–å½“å‰ç”¨æˆ·

å¦åˆ™ ThreadLocal ä¼šå¤±æ•ˆã€‚

---

## 2.3 Service è§„èŒƒ

### â‘  å¤§å‹ä¸šåŠ¡å¿…é¡»æ‹†åˆ† Service

ä¾‹å¦‚è®¢å•ï¼š

* OrderQueryService
* OrderCreateService
* OrderDeliverService

### â‘¡ è°¨æ…ä½¿ç”¨ @Transactional

ä»¥å‡å°‘é•¿æ—¶é—´å ç”¨æ•°æ®åº“è¿æ¥ã€‚

å»ºè®®ï¼š

* service å‡†å¤‡å‚æ•°
* manager æ‰§è¡Œäº‹åŠ¡

### â‘¢ ç±»å†…æ–¹æ³•äº’è°ƒä¸ä¼šè§¦å‘äº‹åŠ¡

éœ€ï¼š

```
@EnableAspectJAutoProxy(exposeProxy = true)
```

æˆ–æ‹†åˆ†åˆ° managerã€‚

---

## 2.4 Manager å±‚è§„èŒƒ

æ¥æºé˜¿é‡Œæ‰‹å†Œï¼š

* å°è£…ç¬¬ä¸‰æ–¹è°ƒç”¨
* ä¸‹æ²‰é€šç”¨èƒ½åŠ›ï¼ˆç¼“å­˜ã€ä¸­é—´ä»¶é€»è¾‘ï¼‰
* DAO ç»„åˆå¤ç”¨

---

## 2.5 DAO å±‚è§„èŒƒ

### â‘  ä½¿ç”¨ Mybatis-plus

* æ‰€æœ‰ Dao å¿…é¡»ç»§æ‰¿ BaseMapper

### â‘¡ ç¦æ­¢ Wrapper

é¿å… SQL è¿½è¸ªå›°éš¾ã€‚

### â‘¢ XML ä¸­ç¦æ­¢å†™æ­»å¸¸é‡

å¿…é¡»ä½¿ç”¨å‚æ•°ä¼ å…¥ã€‚

### â‘£ join å¿…é¡»ä½¿ç”¨å®Œæ•´è¡¨å

ä¾¿äºé˜…è¯»ä¸ç»´æŠ¤ï¼š

```
FROM t_notice
LEFT JOIN t_employee
```

---

## 2.6 JavaBean å‘½åè§„èŒƒ

### â‘  é€šç”¨è¦æ±‚

* ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
* æ‰€æœ‰åŸºæœ¬ç±»å‹å¿…é¡»ç”¨åŒ…è£…ç±»å‹
* å¿…é¡»ä½¿ç”¨ Lombokï¼ˆå¦‚ @Dataï¼‰
* å±æ€§å¿…é¡»æœ‰å¤šè¡Œæ³¨é‡Š
* å»ºè®®ç”¨ @Builderã€@NoArgsConstructor

### â‘¡ å‘½åè§„èŒƒ

| ç±»å‹        | ç”¨é€”            |
| --------- | ------------- |
| XxxEntity | æ•°æ®åº“å®ä½“         |
| XxxDTO    | å‰ç«¯è¯·æ±‚ / å†…éƒ¨ä¼ è¾“å¯¹è±¡ |
| XxxVO     | å‰ç«¯è¿”å›å¯¹è±¡        |
| XxxForm   | è¡¨å•å¯¹è±¡          |
| XxxBO     | å†…éƒ¨ä¸šåŠ¡å¯¹è±¡        |

---

## 2.7 Boolean å‘½åè§„èŒƒ

ç¦æ­¢ä½¿ç”¨ï¼š

```
isDeleted
```

å¿…é¡»ä½¿ç”¨ï¼š

```
deletedFlag
onlineFlag
```

é¿å…ååºåˆ—åŒ–æ¡†æ¶è§£æé”™è¯¯ã€‚

---

# ä¸‰ã€æ•°æ®åº“è§„èŒƒ

## 3.1 æ•°æ®åº“å‘½å

å°å†™ + ä¸‹åˆ’çº¿ + ç¯å¢ƒæ ‡è¯†ï¼š

```
smart_admin_v2_dev
smart_admin_v2_prod
```

---

## 3.2 è¡¨å‘½å

å…¨éƒ¨å°å†™ + ä¸‹åˆ’çº¿ + `t_`ï¼š

```
t_employee
t_department
t_config
```

---

## 3.3 å»ºè¡¨è§„èŒƒ

å¿…å¤‡å­—æ®µï¼š

* `id / module_id`
* `create_time`
* `update_time`

æšä¸¾å­—æ®µå¿…é¡»å†™å…¨å«ä¹‰ï¼š

```
sync_status TINYINT COMMENT 'åŒæ­¥çŠ¶æ€ 0 æœªå¼€å§‹ 1 åŒæ­¥ä¸­ 2 æˆåŠŸ 3 å¤±è´¥'
```

---

## 3.4 ç´¢å¼•è§„èŒƒ

éµå¾ªã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹ã€‚

---

# å››ã€Git å·¥ä½œæµè§„èŒƒ

## 4.1 Git æäº¤ä¿¡æ¯è§„èŒƒ

æ ¼å¼ï¼š

```
type: æè¿°
```

| ç±»å‹       | ç”¨é€”        |
| -------- | --------- |
| feat     | æ–°åŠŸèƒ½       |
| fix      | é—®é¢˜ä¿®å¤      |
| docs     | æ–‡æ¡£æ›´æ–°      |
| style    | æ ¼å¼åŒ–ï¼Œä¸å½±å“é€»è¾‘ |
| refactor | é‡æ„        |
| test     | æµ‹è¯•ç›¸å…³      |
| chore    | æ„å»º/å·¥å…·é“¾    |

---

## 4.2 Git åˆ†æ”¯å‘½åè§„èŒƒ

| ç±»å‹       | ç¤ºä¾‹                     |
| -------- | ---------------------- |
| feature  | feature/user-auth      |
| fix      | fix/login-error        |
| refactor | refactor/login-service |
| release  | release/v1.0.0         |

---

## 4.3 Git åŒæ­¥ä»£ç è§„èŒƒ

> å°½é‡ç”¨ rebase ä»£æ›¿ merge

```bash
git checkout main
git pull --rebase

git fetch origin
git rebase origin/main
```

---

# äº”ã€DTOã€VOã€Entity è§„èŒƒ

* Entity **åªèƒ½ç”¨äºæ•°æ®åº“äº¤äº’**
* DTO ç”¨äº **æ¥æ”¶å‰ç«¯å‚æ•°**
* VO ç”¨äº **è¿”å›å‰ç«¯**
* å³ä½¿ç»“æ„ä¸€æ ·ï¼Œä¹Ÿå¿…é¡»åˆ†æˆ 3 ä¸ªç±»
  â†’ ä¾¿äºæ‰©å±•ã€è§£è€¦ã€è„±æ•

---

# å…­ã€å¤§æ¨¡å—ä¸‹é¡¹ç›®ç®¡ç†åŠæ³•

## 1. åŒ…åè§„èŒƒ

```
å¤§æ¨¡å—å.å°æ¨¡å—å.å…·ä½“åŠŸèƒ½
```

ç¤ºä¾‹ï¼š

```
model.fireinvestigation.photodossier.entity.PhotoDossier
```

---

## 2. è¡¨åè§„èŒƒ

```
tb_å¤§æ¨¡å—å‰ç¼€_è¡¨å
```

ç¤ºä¾‹ï¼š

```
tb_fireinv_photo_dossier
```

å®ä½“ä»ä¿æŒï¼š

```
PhotoDossier
```

---

## 3. å¤§æ¨¡å—å‰ç¼€å¯¹ç…§è¡¨

| æ¨¡å—   | å¤§æ¨¡å—å              | å‰ç¼€      |
| ---- | ----------------- | ------- |
| ç«ç¾è°ƒæŸ¥ | fireinvestigation | fireinv |
| æ‰§æ³•ç›‘ç£ | fireenforcement   | fireenf |

---

